<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Encrypted IndexedDB Load Test</title>
    <script src="../../dist/encrypted-indexed-db.js"></script>

    <!-- JQuery is Required by Bootstrap -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div id="top">
    <button class="btn btn-primary" id="run" onclick="loadTest()">Run Load Test</button>
</div>
<div id="main">
    <h1>Status</h1>
    <table id="status-table" class="table table-bordered">
        <tbody>
          <tr>
              <td>Test:</td>
              <td><div id="status">&nbsp</div></td>
          </tr>
          <tr>
              <td>Module Progress:</td>
              <td>
                  <div class="progress" >
                      <div class="progress-bar progress-bar-striped progress-bar-animated" id="module-progress" role="progressbar" style="width: 0;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">0%</div>
                  </div>
              </td>
          </tr>
          <tr>
              <td>Total Progress:</td>
              <td>
                  <div class="progress" >
                      <div class="progress-bar progress-bar-striped progress-bar-animated" id="total-progress" role="progressbar" style="width: 0;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">0%</div>
                  </div>
              </td>
          </tr>
        </tbody>
    </table>

    <h1>Results</h1>
    <textarea readonly="readonly" id="results-csv"></textarea>
    <table id="results-table" class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>Module Id</th>
            <th>Document Count</th>
            <th>Avg Document Size<br />(kB)</th>
            <th>Total Time<br />(ms)</th>
            <th>Avg Read Time<br />(ms)</th>
            <th>Avg Write Time<br />(ms)</th>
            <th>Avg Read/Write Time<br />(ms)</th>
            <th>Avg Read Throughput<br />(kBps)</th>
            <th>Avg Write Throughput<br />(kBps)</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
    <div>
        <button id="download" class="btn btn-primary" onclick="downloadCsv()" disabled="disabled">Download Results</button>
    </div>
</div>
<script src="./load-test.js"></script>
</body>
</html>